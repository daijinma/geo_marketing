# Python è™šæ‹Ÿç¯å¢ƒé…ç½®è¯´æ˜

## æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ

geo_agent ä½¿ç”¨ **æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ** (`.venv/`)ï¼Œæ‰€æœ‰ä¾èµ–éƒ½å®‰è£…åœ¨é¡¹ç›®ç›®å½•ä¸‹ã€‚

### é…ç½®ç¡®è®¤

âœ… **è™šæ‹Ÿç¯å¢ƒä½ç½®**: `geo_agent/.venv/`  
âœ… **ç®¡ç†æ–¹å¼**: uv è‡ªåŠ¨ç®¡ç†  
âœ… **Python ç‰ˆæœ¬**: 3.12ï¼ˆç”± `.python-version` æŒ‡å®šï¼‰  
âœ… **ä¾èµ–é”å®š**: `uv.lock` æ–‡ä»¶

## è™šæ‹Ÿç¯å¢ƒç»“æ„

```
geo_agent/
â”œâ”€â”€ .venv/                    # æœ¬åœ°è™šæ‹Ÿç¯å¢ƒç›®å½•
â”‚   â”œâ”€â”€ bin/                  # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆLinux/Macï¼‰
â”‚   â”‚   â”œâ”€â”€ python           # Python è§£é‡Šå™¨
â”‚   â”‚   â”œâ”€â”€ pip              # pip å·¥å…·
â”‚   â”‚   â”œâ”€â”€ uvicorn          # uvicorn æœåŠ¡å™¨
â”‚   â”‚   â””â”€â”€ pytest           # pytest æµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ lib/                  # Python åº“æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ python3.12/
â”‚   â”‚       â””â”€â”€ site-packages/  # å·²å®‰è£…çš„åŒ…
â”‚   â””â”€â”€ pyvenv.cfg           # è™šæ‹Ÿç¯å¢ƒé…ç½®
â”œâ”€â”€ .python-version          # Python ç‰ˆæœ¬æŒ‡å®š
â”œâ”€â”€ pyproject.toml           # é¡¹ç›®é…ç½®
â””â”€â”€ uv.lock                  # ä¾èµ–é”å®šæ–‡ä»¶
```

## éªŒè¯è™šæ‹Ÿç¯å¢ƒ

### æ–¹æ³• 1: ä½¿ç”¨ Makefile

```bash
make check-env
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ… Local virtual environment: .venv/
Python: Python 3.12.x
Location: /path/to/geo_agent/.venv
```

### æ–¹æ³• 2: æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒ

```bash
# æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒç›®å½•
ls -la .venv/

# æŸ¥çœ‹ Python ä½ç½®
uv run which python

# æŸ¥çœ‹ Python ç‰ˆæœ¬
uv run python --version

# æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
uv pip list
```

### æ–¹æ³• 3: æ£€æŸ¥åŒ…ä½ç½®

```bash
# æŸ¥çœ‹åŒ…çš„å®‰è£…ä½ç½®
uv run python -c "import fastapi; print(fastapi.__file__)"
# è¾“å‡ºåº”è¯¥åœ¨ .venv/ ç›®å½•ä¸‹
```

## uv è™šæ‹Ÿç¯å¢ƒé…ç½®

### pyproject.toml é…ç½®

```toml
[tool.uv]
# ä½¿ç”¨é¡¹ç›®æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ
managed = true

dev-dependencies = [
    "pytest>=7.4.0",
    "pytest-asyncio>=0.23.0",
    "openai>=1.10.0",
]
```

### è™šæ‹Ÿç¯å¢ƒç‰¹æ€§

1. **è‡ªåŠ¨åˆ›å»º**: é¦–æ¬¡è¿è¡Œ `uv sync` æ—¶è‡ªåŠ¨åˆ›å»º `.venv/`
2. **æœ¬åœ°éš”ç¦»**: æ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ
3. **æ— éœ€æ¿€æ´»**: ä½¿ç”¨ `uv run` è‡ªåŠ¨åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œ
4. **è·¨å¹³å°**: Linuxã€Macã€Windows éƒ½ä½¿ç”¨ç›¸åŒé…ç½®

## ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

### æ¨èæ–¹å¼ï¼šä½¿ç”¨ uv runï¼ˆæ— éœ€æ¿€æ´»ï¼‰

```bash
# è¿è¡Œ Python è„šæœ¬
uv run python main.py

# è¿è¡Œ pytest
uv run pytest

# è¿è¡Œä»»ä½•å‘½ä»¤
uv run uvicorn main:app

# ä½¿ç”¨ Makefileï¼ˆå†…éƒ¨ä½¿ç”¨ uv runï¼‰
make dev
make test
```

### ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨æ¿€æ´»ï¼ˆä¸æ¨èï¼‰

```bash
# Linux / Mac
source .venv/bin/activate

# Windows
.venv\Scripts\activate

# æ¿€æ´»åå¯ä»¥ç›´æ¥è¿è¡Œå‘½ä»¤
python main.py
pytest

# é€€å‡ºè™šæ‹Ÿç¯å¢ƒ
deactivate
```

> ğŸ’¡ **æ¨èä½¿ç”¨ `uv run` æˆ– Makefile å‘½ä»¤**ï¼Œæ— éœ€æ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼

## è™šæ‹Ÿç¯å¢ƒç®¡ç†

### é‡å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ é™¤è™šæ‹Ÿç¯å¢ƒ
rm -rf .venv

# é‡æ–°åˆ›å»º
make install
# æˆ–
uv sync
```

### æ¸…ç†è™šæ‹Ÿç¯å¢ƒ

```bash
# æ¸…ç†æ‰€æœ‰ï¼ˆåŒ…æ‹¬è™šæ‹Ÿç¯å¢ƒï¼‰
make clean

# é‡æ–°å®‰è£…
make install
```

### æ›´æ–°ä¾èµ–

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–
uv sync --upgrade

# æ›´æ–°åè™šæ‹Ÿç¯å¢ƒè‡ªåŠ¨æ›´æ–°
```

## è™šæ‹Ÿç¯å¢ƒ vs å…¨å±€ç¯å¢ƒ

### æœ¬åœ°è™šæ‹Ÿç¯å¢ƒï¼ˆå½“å‰é…ç½®ï¼‰ âœ…

**ä¼˜åŠ¿**:
- âœ… é¡¹ç›®éš”ç¦»ï¼Œä¾èµ–ä¸å†²çª
- âœ… ç‰ˆæœ¬ç‹¬ç«‹ï¼Œå¯ä»¥æœ‰å¤šä¸ª Python ç‰ˆæœ¬
- âœ… æ˜“äºç®¡ç†å’Œåˆ é™¤
- âœ… å›¢é˜Ÿæˆå‘˜ç¯å¢ƒä¸€è‡´
- âœ… ä¸æ±¡æŸ“ç³»ç»Ÿ Python

**ä½ç½®**: `geo_agent/.venv/`

### å…¨å±€ç¯å¢ƒ âŒ

**åŠ£åŠ¿**:
- âŒ æ‰€æœ‰é¡¹ç›®å…±äº«ä¾èµ–
- âŒ ç‰ˆæœ¬å†²çªé£é™©
- âŒ éš¾ä»¥æ¸…ç†
- âŒ å›¢é˜Ÿç¯å¢ƒå¯èƒ½ä¸ä¸€è‡´
- âŒ å¯èƒ½å½±å“ç³»ç»Ÿ Python

**ä½ç½®**: `/usr/local/lib/python3.12/` æˆ– `/Library/Python/3.12/`

## Git é…ç½®

### .gitignore

è™šæ‹Ÿç¯å¢ƒå·²è¢«å¿½ç•¥ï¼š

```gitignore
# Virtual environments
venv/
env/
ENV/
.venv/        # â† æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ

# uv
uv.lock       # â† åº”è¯¥æäº¤ï¼
.python-version  # â† å¯ä»¥å¿½ç•¥æˆ–æäº¤
```

### æäº¤ç­–ç•¥

| æ–‡ä»¶ | æ˜¯å¦æäº¤ | è¯´æ˜ |
|------|---------|------|
| `.venv/` | âŒ ä¸æäº¤ | è™šæ‹Ÿç¯å¢ƒï¼ˆå¿½ç•¥ï¼‰ |
| `uv.lock` | âœ… æäº¤ | ä¾èµ–é”å®šæ–‡ä»¶ |
| `pyproject.toml` | âœ… æäº¤ | é¡¹ç›®é…ç½® |
| `.python-version` | âœ… æäº¤ | Python ç‰ˆæœ¬ |

## å›¢é˜Ÿåä½œ

### æ–°æˆå‘˜è®¾ç½®

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repo>
cd geo_agent

# 2. å®‰è£… uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# 3. å®‰è£…ä¾èµ–ï¼ˆè‡ªåŠ¨åˆ›å»º .venvï¼‰
make install

# 4. éªŒè¯ç¯å¢ƒ
make check-env

# 5. è¿è¡Œé¡¹ç›®
make dev
```

### æ‹‰å–æ›´æ–°å

```bash
git pull
make install  # åŒæ­¥ä¾èµ–åˆ° .venv
```

## å¤šé¡¹ç›®ç¯å¢ƒéš”ç¦»

å¦‚æœä½ æœ‰å¤šä¸ª Python é¡¹ç›®ï¼š

```
~/projects/
â”œâ”€â”€ geo_agent/
â”‚   â”œâ”€â”€ .venv/              # geo_agent çš„è™šæ‹Ÿç¯å¢ƒ
â”‚   â””â”€â”€ pyproject.toml
â”œâ”€â”€ project_a/
â”‚   â”œâ”€â”€ .venv/              # project_a çš„è™šæ‹Ÿç¯å¢ƒ
â”‚   â””â”€â”€ pyproject.toml
â””â”€â”€ project_b/
    â”œâ”€â”€ .venv/              # project_b çš„è™šæ‹Ÿç¯å¢ƒ
    â””â”€â”€ pyproject.toml
```

æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„ `.venv/`ï¼Œäº’ä¸å¹²æ‰°ï¼

## å¸¸è§é—®é¢˜

### Q: .venv åœ¨å“ªé‡Œï¼Ÿ

**A**: åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼š
```bash
cd geo_agent
ls -la .venv/
```

### Q: å¦‚ä½•ç¡®è®¤ä½¿ç”¨çš„æ˜¯æœ¬åœ°ç¯å¢ƒï¼Ÿ

**A**: è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```bash
uv run which python
# è¾“å‡ºåº”è¯¥æ˜¯: /path/to/geo_agent/.venv/bin/python

make check-env
# è¾“å‡ºè™šæ‹Ÿç¯å¢ƒä¿¡æ¯
```

### Q: è™šæ‹Ÿç¯å¢ƒä¼šå¾ˆå¤§å—ï¼Ÿ

**A**: é€šå¸¸ 200-500MBï¼Œä½†å®Œå…¨å€¼å¾—ï¼š
- âœ… é¡¹ç›®éš”ç¦»
- âœ… ä¾èµ–ç‹¬ç«‹
- âœ… æ˜“äºç®¡ç†

### Q: å¯ä»¥åˆ é™¤è™šæ‹Ÿç¯å¢ƒå—ï¼Ÿ

**A**: å¯ä»¥ï¼éšæ—¶å¯ä»¥é‡å»ºï¼š
```bash
rm -rf .venv
make install  # é‡æ–°åˆ›å»º
```

### Q: ä¸ºä»€ä¹ˆä¸æäº¤ .venv åˆ° Gitï¼Ÿ

**A**: å› ä¸ºï¼š
1. å¤ªå¤§ï¼ˆ200-500MBï¼‰
2. åŒ…å«äºŒè¿›åˆ¶æ–‡ä»¶
3. è·¨å¹³å°ä¸å…¼å®¹
4. å¯ä»¥é€šè¿‡ `uv.lock` é‡å»º

### Q: uv ä¼šä½¿ç”¨å…¨å±€ç¯å¢ƒå—ï¼Ÿ

**A**: ä¸ä¼šï¼uv é»˜è®¤ä½¿ç”¨é¡¹ç›®æœ¬åœ°çš„ `.venv/`

### Q: å¦‚ä½•æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒçš„åŒ…ï¼Ÿ

**A**: 
```bash
uv pip list
# æˆ–
uv run pip list
```

## IDE é…ç½®

### VS Code

è‡ªåŠ¨æ£€æµ‹ `.venv/`ï¼Œæˆ–æ‰‹åŠ¨é…ç½®ï¼š

```json
{
  "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python"
}
```

### PyCharm

é¡¹ç›®è®¾ç½® â†’ Python Interpreter â†’ é€‰æ‹© `.venv/bin/python`

### Cursor

è‡ªåŠ¨æ£€æµ‹ `.venv/`

## æ€»ç»“

âœ… **æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ**: `geo_agent/.venv/`  
âœ… **è‡ªåŠ¨ç®¡ç†**: uv è‡ªåŠ¨åˆ›å»ºå’Œç»´æŠ¤  
âœ… **é¡¹ç›®éš”ç¦»**: æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ç¯å¢ƒ  
âœ… **æ— éœ€æ¿€æ´»**: ä½¿ç”¨ `uv run` æˆ– `make` å‘½ä»¤  
âœ… **å›¢é˜Ÿä¸€è‡´**: é€šè¿‡ `uv.lock` ç¡®ä¿ä¸€è‡´æ€§  

**éªŒè¯è™šæ‹Ÿç¯å¢ƒ**:
```bash
make check-env
```

**ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ**:
```bash
make dev
make test
uv run python main.py
```

---

**äº«å—éš”ç¦»ã€å®‰å…¨ã€é«˜æ•ˆçš„ Python å¼€å‘ç¯å¢ƒï¼** ğŸ‰
