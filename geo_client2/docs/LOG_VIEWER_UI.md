# 日志查看器UI使用说明

## 访问方式

在应用中点击侧边栏的 **"日志列表"** 或直接访问 `/logs` 路径。

## 界面布局

```
┌─────────────────────────────────────────────────────────────┐
│  系统日志                           [筛选] [刷新]             │
├─────────────────────────────────────────────────────────────┤
│  筛选面板（可展开/收起）                                       │
│  ┌─────────┬─────────┬─────────┬─────────┐                  │
│  │ 级别▾   │ 来源    │ 任务ID  │ 搜索    │                  │
│  │ ERROR   │ frontend│   42    │ test... │  [清除筛选 ×]    │
│  └─────────┴─────────┴─────────┴─────────┘                  │
├─────────────────────────────────────────────────────────────┤
│ 时间         │ 级别  │ 来源      │ 消息          │ 组件│ 耗时│
├──────────────┼───────┼──────────┼───────────────┼─────┼─────┤
│ 10:30:45     │ERROR  │executor  │Search failed  │-    │ -   │
│ 10:30:12     │INFO   │frontend  │User clicked.. │Form │ -   │
│ 10:29:58     │DEBUG  │logger    │State change.. │Store│ -   │
│              │       │          │               │     │     │
└──────────────┴───────┴──────────┴───────────────┴─────┴─────┘
│ 显示 1 - 50 条            [上一页] [第1页] [下一页]          │
└─────────────────────────────────────────────────────────────┘
```

## 功能说明

### 1. 筛选功能

**级别筛选：**
- `ERROR` - 红色，错误信息
- `WARN` - 黄色，警告信息
- `INFO` - 蓝色，一般信息
- `DEBUG` - 灰色，调试信息

**来源筛选：**
- `frontend` - 前端日志
- `backend` - 后端日志
- 具体文件名如 `executor.go:75`

**任务ID筛选：**
- 输入任务ID查看该任务的所有日志

**搜索：**
- 在消息、来源、详情中搜索关键词

### 2. 日志详情

点击日志行可展开查看详细信息：

```
▼ 2026-01-23 10:30:45 | ERROR | executor.go:75 | Failed to get active account
  
  Session ID: sess-abc-123-def-456
  Correlation ID: corr-xyz-789
  用户操作: create_task
  任务ID: 42
  
  详细信息:
  {
    "platform": "doubao",
    "error": "no active account found",
    "error_type": "*errors.errorString"
  }
```

### 3. 颜色标识

- 🔴 **红色背景** - ERROR 级别
- 🟡 **黄色背景** - WARN 级别  
- 🔵 **蓝色背景** - INFO 级别
- ⚪ **灰色背景** - DEBUG 级别

### 4. 分页

- 每页显示 50 条日志
- 使用底部的分页按钮浏览
- 显示当前范围："显示 1 - 50 条"

## 使用场景

### 场景1：调试任务失败
1. 在 "任务ID" 筛选框输入任务ID
2. 按级别筛选 "ERROR"
3. 查看错误日志的详细信息
4. 查看 Correlation ID 追踪整个请求链路

### 场景2：追踪用户操作
1. 找到用户会话的第一条日志
2. 复制 Session ID
3. 搜索该 Session ID
4. 按时间顺序查看用户的所有操作

### 场景3：性能分析
1. 按来源筛选特定模块
2. 查看 "耗时" 列
3. 找出执行时间长的操作
4. 展开详情查看性能数据

### 场景4：错误统计
1. 筛选级别为 "ERROR"
2. 查看不同来源的错误分布
3. 识别频繁出错的模块

## 快捷操作

- **刷新** - 点击右上角刷新按钮获取最新日志
- **清除筛选** - 点击筛选面板的 "清除筛选" 重置所有筛选条件
- **展开/收起筛选** - 点击 "筛选" 按钮切换筛选面板显示

## 技术细节

- 数据存储在本地 SQLite 数据库
- 日志路径：`~/.geo_client2/cache.db`
- 日志会自动记录，无需手动操作
- 支持按时间倒序查看（最新的在前）

## 注意事项

⚠️ **日志会随时间增长**
- 建议定期清理旧日志
- 未来版本将支持自动清理（保留最近30天）

⚠️ **敏感信息**
- 日志不会记录密码、Token等敏感信息
- 用户输入会被安全处理

## 开发者提示

查看 `LOGGING.md` 获取：
- 如何在代码中添加日志
- 日志最佳实践
- API 使用文档
