# Cargo 配置文件
# 优化构建速度和依赖管理

[net]
# 如果依赖已存在，可以尝试离线模式
# offline = false

# 配置重试次数
retry = 2

# 使用系统 Git CLI 而不是 libgit2（更快更稳定）
git-fetch-with-cli = true

# 如果在中国，可以使用镜像源
# 注意：如果镜像源更新索引很慢，可以：
# 1. 临时注释掉下面的镜像源配置，使用官方源
# 2. 或者使用离线模式：cargo build --offline
# 3. 或者尝试其他镜像源（如清华）

# 方案1：使用中科大镜像（Git 协议，较慢但稳定）
# 如果卡在更新索引，可以临时注释掉下面的配置，使用官方源
# [source.crates-io]
# replace-with = 'ustc'
# 
# [source.ustc]
# registry = "https://mirrors.ustc.edu.cn/crates.io-index"

# 方案2：使用官方源 + sparse protocol（推荐，如果网络允许）
# 如果镜像源卡住，取消注释下面的配置，并注释掉上面的镜像源配置
[registries.crates-io]
protocol = "sparse"

[build]
# 增量编译（默认启用）
# Cargo 会自动使用所有可用 CPU 核心进行并行编译，无需显式配置 jobs
incremental = true

[profile.dev]
# 开发模式优化
opt-level = 0
debug = true
split-debuginfo = "unpacked"

[profile.release]
# 发布模式优化
opt-level = 3
lto = true
codegen-units = 1
